{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ohmeg\\\\code\\\\FoodFinder\\\\client\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './Map.css';\n\n// Fix for default marker icons in react-leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\n// Custom icons for different location types\nconst createCustomIcon = color => {\n  return L.divIcon({\n    className: 'custom-marker',\n    html: `<div style=\"background-color: ${color};\" class=\"marker-pin\"></div>`,\n    iconSize: [30, 42],\n    iconAnchor: [15, 42],\n    popupAnchor: [0, -42]\n  });\n};\nconst icons = {\n  foodbank: createCustomIcon('#43a047'),\n  community_fridge: createCustomIcon('#66bb6a'),\n  food_box: createCustomIcon('#fdd835')\n};\n\n// Component to handle map centering when location is selected\nfunction MapController({\n  selectedLocation,\n  cityCenter\n}) {\n  _s();\n  const map = useMap();\n  const prevCityCenter = React.useRef(cityCenter);\n  useEffect(() => {\n    if (selectedLocation) {\n      map.flyTo([selectedLocation.coordinates.lat, selectedLocation.coordinates.lng], 15, {\n        duration: 1\n      });\n    }\n  }, [selectedLocation, map]);\n  useEffect(() => {\n    // Only fly to city if the city center actually changed (not just a re-render)\n    const prev = prevCityCenter.current;\n    if (cityCenter && prev && (prev[0] !== cityCenter[0] || prev[1] !== cityCenter[1])) {\n      map.flyTo(cityCenter, 12, {\n        duration: 1.5\n      });\n    }\n    prevCityCenter.current = cityCenter;\n  }, [cityCenter, map]);\n  return null;\n}\n_s(MapController, \"ljsETbPEDIftsEVqt71p2jVS4/c=\", false, function () {\n  return [useMap];\n});\n_c = MapController;\nfunction Map({\n  locations,\n  selectedLocation,\n  onLocationClick,\n  onMapClick,\n  cityCenter\n}) {\n  const defaultCenter = cityCenter || [39.7392, -104.9903]; // Fallback to Denver\n  const defaultZoom = 12;\n  const handleMapClick = e => {\n    if (onMapClick) {\n      onMapClick({\n        lat: e.latlng.lat,\n        lng: e.latlng.lng\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: defaultCenter,\n    zoom: defaultZoom,\n    className: \"leaflet-map\",\n    onClick: handleMapClick,\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapController, {\n      selectedLocation: selectedLocation,\n      cityCenter: cityCenter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), locations.map(location => /*#__PURE__*/_jsxDEV(Marker, {\n      position: [location.coordinates.lat, location.coordinates.lng],\n      icon: icons[location.type],\n      eventHandlers: {\n        click: () => onLocationClick(location)\n      },\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: location.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"popup-type\",\n            children: location.type.replace('_', ' ').toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 18\n            }, this), \" \", location.address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Hours:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 18\n            }, this), \" \", location.hours]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), location.phone && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Phone:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 37\n            }, this), \" \", location.phone]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"popup-description\",\n            children: location.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)\n    }, location.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapController\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useEffect","MapContainer","TileLayer","Marker","Popup","useMap","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","createCustomIcon","color","divIcon","className","html","iconSize","iconAnchor","popupAnchor","icons","foodbank","community_fridge","food_box","MapController","selectedLocation","cityCenter","_s","map","prevCityCenter","useRef","flyTo","coordinates","lat","lng","duration","prev","current","_c","Map","locations","onLocationClick","onMapClick","defaultCenter","defaultZoom","handleMapClick","e","latlng","center","zoom","onClick","children","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","location","position","icon","type","eventHandlers","click","name","replace","toUpperCase","address","hours","phone","description","id","_c2","$RefreshReg$"],"sources":["C:/Users/ohmeg/code/FoodFinder/client/src/components/Map.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './Map.css';\r\n\r\n// Fix for default marker icons in react-leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\n// Custom icons for different location types\r\nconst createCustomIcon = (color) => {\r\n  return L.divIcon({\r\n    className: 'custom-marker',\r\n    html: `<div style=\"background-color: ${color};\" class=\"marker-pin\"></div>`,\r\n    iconSize: [30, 42],\r\n    iconAnchor: [15, 42],\r\n    popupAnchor: [0, -42]\r\n  });\r\n};\r\n\r\nconst icons = {\r\n  foodbank: createCustomIcon('#43a047'),\r\n  community_fridge: createCustomIcon('#66bb6a'),\r\n  food_box: createCustomIcon('#fdd835')\r\n};\r\n\r\n// Component to handle map centering when location is selected\r\nfunction MapController({ selectedLocation, cityCenter }) {\r\n  const map = useMap();\r\n  const prevCityCenter = React.useRef(cityCenter);\r\n  \r\n  useEffect(() => {\r\n    if (selectedLocation) {\r\n      map.flyTo(\r\n        [selectedLocation.coordinates.lat, selectedLocation.coordinates.lng],\r\n        15,\r\n        { duration: 1 }\r\n      );\r\n    }\r\n  }, [selectedLocation, map]);\r\n\r\n  useEffect(() => {\r\n    // Only fly to city if the city center actually changed (not just a re-render)\r\n    const prev = prevCityCenter.current;\r\n    if (cityCenter && prev && \r\n        (prev[0] !== cityCenter[0] || prev[1] !== cityCenter[1])) {\r\n      map.flyTo(cityCenter, 12, { duration: 1.5 });\r\n    }\r\n    prevCityCenter.current = cityCenter;\r\n  }, [cityCenter, map]);\r\n  \r\n  return null;\r\n}\r\n\r\nfunction Map({ locations, selectedLocation, onLocationClick, onMapClick, cityCenter }) {\r\n  const defaultCenter = cityCenter || [39.7392, -104.9903]; // Fallback to Denver\r\n  const defaultZoom = 12;\r\n\r\n  const handleMapClick = (e) => {\r\n    if (onMapClick) {\r\n      onMapClick({\r\n        lat: e.latlng.lat,\r\n        lng: e.latlng.lng\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MapContainer\r\n      center={defaultCenter}\r\n      zoom={defaultZoom}\r\n      className=\"leaflet-map\"\r\n      onClick={handleMapClick}\r\n    >\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      \r\n      <MapController selectedLocation={selectedLocation} cityCenter={cityCenter} />\r\n      \r\n      {locations.map(location => (\r\n        <Marker\r\n          key={location.id}\r\n          position={[location.coordinates.lat, location.coordinates.lng]}\r\n          icon={icons[location.type]}\r\n          eventHandlers={{\r\n            click: () => onLocationClick(location)\r\n          }}\r\n        >\r\n          <Popup>\r\n            <div className=\"popup-content\">\r\n              <h3>{location.name}</h3>\r\n              <p className=\"popup-type\">{location.type.replace('_', ' ').toUpperCase()}</p>\r\n              <p><strong>Address:</strong> {location.address}</p>\r\n              <p><strong>Hours:</strong> {location.hours}</p>\r\n              {location.phone && <p><strong>Phone:</strong> {location.phone}</p>}\r\n              <p className=\"popup-description\">{location.description}</p>\r\n            </div>\r\n          </Popup>\r\n        </Marker>\r\n      ))}\r\n    </MapContainer>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}